<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="css/launcher.css">
</head>
<body>

<div id="container">
    <div id="gauge"></div>

    <div id="gauge-digital-display-1" class="gauge-digital-display">
        <div>
            <canvas id="digitalPressure">
            </canvas>
        </div>
    </div>

    <div id="gauge-digital-display-2" class="gauge-digital-display">
        <div>
            <canvas id="digitalPressure2">
            </canvas>
        </div>
    </div>
</div>





<!--
<div id="container">
    <a href="#" class="button">Launch</a>
    &lt;!&ndash;<a href="#" class="button">Stop</a>&ndash;&gt;
</div>-->


<script type="text/javascript" src="/socket.io/socket.io.js"></script>
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.min.js"></script>
<script type="text/javascript" src="/js/lib/dialchart.js"></script>
<script type="text/javascript" src="/js/lib/segment-display.js"></script>

<script type="text/javascript" src="/js/ws.js"></script>

<script>
    var display = new SegmentDisplay("digitalPressure");
    display.pattern = "###";
    display.displayAngle = 6;
    display.digitHeight = 20;
    display.digitWidth = 14;
    display.digitDistance = 2.5;
    display.segmentWidth = 2;
    display.segmentDistance = 0.3;
    display.segmentCount = 7;
    display.cornerType = 3;
    display.colorOn = "#ffffff";
    display.colorOff = "#3b3b3b";
    display.draw();
    display.setValue('000');

    var display2 = new SegmentDisplay("digitalPressure2");
    display2.pattern = "###";
    display2.displayAngle = 6;
    display2.digitHeight = 20;
    display2.digitWidth = 14;
    display2.digitDistance = 2.5;
    display2.segmentWidth = 2;
    display2.segmentDistance = 0.3;
    display2.segmentCount = 7;
    display2.cornerType = 3;
    display2.colorOn = "#ffffff";
    display2.colorOff = "#3b3b3b";
    display2.draw();
    display2.setValue('000');

    var updateDial = (function (chartselector) {
        var w = 320,
            h = 320;

        var layout = [
            { x: 160, y: 160, r: 150, m: 150, ticks: 2, mark: 'line' },
//            { x: 460, y: 250, r: 200, m: 50, ticks: 4, mark: 'line' },
//            { x: 810, y: 250, r: 120, m: 80, ticks: 2, mark: 'circle' }
        ];
        var charts = layout.map(function (d) {
            return NBXDialChart()
                    .width(d.r * 2)
                    .height(d.r * 2)
                    .domain([0, d.m])
                    .range([-150, 150])
                    .minorTicks(d.ticks)
                    .minorMark(d.mark);
        });

        var svg = d3.select(chartselector)
                .append('svg:svg')
                .attr('width', w)
                .attr('height', h);

        var dials = svg.selectAll('g.dial')
                .data(layout)
                .enter().append('svg:g')
                .attr('class', 'dial')
                .attr('id', function (d, i) {
                    return 'dial-' + i;
                })
                .attr('transform', function (d) {
                    return 'translate(' + (d.x - d.r) + ',' + (d.y - d.r) + ')';
                });

        dials.each(function (d, i) {
            d3.select(this)
                    .data([0])
                    .call(charts[i]);
        });

        return function (val) {
            dials.each(function (d, i) {
                d3.select(this)
                        .data([val])
                        .call(charts[i]);
            });
        };

    })('#gauge');
</script>

</body>
</html>